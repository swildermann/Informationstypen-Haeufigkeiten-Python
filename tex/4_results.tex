\section{Auswertungen}
In diesem Abschnitt werden alle Ergebnisse der Auswertungen aufgezeigt und die dafür notwendigen Schritte erklärt. 

\subsection{Konfusionen}
Bei der Überprüfung der Verträglichkeit zweier Markierungen gibt es immer wieder den Fall, dass Gutachter A den Typ X, Gutachter B hingegen den Typ Y für sinnvoller hält. Daher wird überprüft, ob es Typen gibt, die besonders häufig mit einander verwechselt  werden. Mit Hilfe der folgenden SQL-Anweisung wurden alle aufgetretenen Konfusionen inklusive Häufigkeit des Auftretens ausgegeben: 
\begin{lstlisting}[language=SQL] 
SELECT atype_id, btype_id, COUNT(*) 
FROM extractor_confusions 
GROUP BY atype_id, btype_id 
ORDER BY COUNT(*) DESC;
\end{lstlisting} 
Wenn jetzt noch die Reihenfolge ignoriert wird, also die Ergbenisse der Tupel (X,Y) mit denen von (Y,X) addiert werden, erhält man folgende Konfusionen, absteigend sortiert nach Häufigkeiten des Auftretens. 
\begin{figure}[H]
\centering
\begin{tabular}{|>{\columncolor[gray]{0.8}}c|c|c|c|}\hline
  Nr. & Typ A & Typ B & Anzahl \\ \hline \hline
  1 &Functionality and Behaviour      &    Structure and Relationships    &  324 \\ \hline
  2 &Functionality and Behaviour      &    Purpose and Rationale            &  232 \\ \hline
  3 & Functionality and Behaviour      &    Concepts                                &  209 \\ \hline
  4 &Functionality and Behaviour      &    Directives                               &  161 \\ \hline
  5 &Functionality and Behaviour      &    Non-Information                     &  147 \\ \hline
  6 & Functionality and Behaviour      &    Qual. Attributes, Intern. Aspects    &  124 \\ \hline
  7 & Functionality and Behaviour      &    Environment                           &  110 \\ \hline
   8 &  Concepts                                  &    Structure and Relationships     &  87 \\ \hline
   9 & Purpose and Rationale               &    Structure and Relationships   &  83 \\ \hline
  10 & Functionality and Behaviour      &    Patterns                                  &  78 \\ \hline
  11 & Patterns                                     &    Code Examples                      &  72 \\ \hline
  12 & Functionality and Behaviour       &    Control-Flow                          &  65 \\ \hline
  13 & Concepts     								&   Purpose and Rationale      		& 59 \\ \hline
   14 & Structure and Relationships     & Patterns 										& 55 \\ \hline
  15 & Purpose and Rationale 				& Patterns 									 & 54 \\ \hline
  16 &  Qual. Attributes, Intern. Aspects & Structure and Relationships & 51 \\ \hline
  17 & Concepts 									&  Qual. Attributes, Intern. Aspects & 51 \\ \hline
 \end{tabular}
\caption[Konfusionshäufigkeiten]{Konfusionshäufigkeiten}
\end{figure} 
Aufgelistet werden die Konfusionen hier, sobald die untere Schranke von 50 Vorkommen erreicht wird. Um sich später leichter auf einzelne Konfusionen beziehen zu können, sind diese durchnummeriert.
Für jedes dieser Paare wird einmal der Typ angegeben, welcher erfahrungsgemäß häufiger der richtige sein müsste. Dabei wird berücksichtigt, dass es besser sein sollte, in einem langen Segment erst den allgemeineneren und danach den spezielleren Fall zu priorisieren (entsprechend des Kodier-Handbuchs). 
Dies ergibt die zweite und dritte Spalte der Tabelle in Abbildung \ref{tabelle:Abschaetzung_Konfusion}.
Anschließend werden von jedem dieser Konfusionspaare zufällig zehn Stück aus der Stichprobe gezogen und exemplarisch begutachtet. 
Für jeden dieser Fälle muss dann entschieden werden, welche Kodierung angemessen ist. Dabei gibt es drei Fälle: 
\begin{itemize}
\item Typ X ist angemessener
\item Typ Y ist angemessener
\item Beide Typen sind gleich (gut oder schlecht) angemessen
\end{itemize}
Für die gesamte Stichprobe bekommt dann ein Typ X Vorrang, wenn Typ X mindestens zu $\frac{3}{5}$ und TYP Y höchstens zu $\frac{1}{5}$ besser ist und andersherum. Wenn das Ergebnis aus dieser Betrachtung nicht mit der Ersteinschätzung übereinstimmt, werden weitere zehn Elemente begutachtet.  In Bezug auf die gesamte Stichprobe wirken sich diese Vorrangsregeln nur wenig aus, helfen aber dennoch weiter, um aus den Typisierungen einer Einheit von zwei Gutachtern eine endgültige zu erschaffen.
\begin{figure}[H]
\centering
\begin{tabular}{|>{\columncolor[gray]{0.8}}c|c|c|c|c|}\hline
Nr. & Erfahrungsgemäß  &  Zustimmung & Widerspruch & Neutral \\
      & besserer Typ 		  &  &  &  \\  \hline \hline
1  & Structure and Relationships  & 7/20 & 10/20 & 3/20\\ \hline
\rowcolor{green!30} 2 & Functionality and Behaviour  & 7/10 & 2/10& 1/10\\ \hline
\rowcolor{green!30 }3 & Concepts 					 & 7/10 & 2/10  & 1/10 \\ \hline
 4 & 	Directives	 				  & 6/20 & 12/20 & 2/20\ \\ \hline
\rowcolor{green!30} 5&	Functionality and Behaviour  & 7/10 & 2/10  & 1/10\\ \hline
6&	Qual. Attributes, Intern. Aspects	 & 9/20 & 10/20 & 1/20 \\ \hline
\rowcolor{red!30} 7&	Environment	 & 3/20 & 12/20 & 5/20 \\ \hline
\rowcolor{green!30}  8&	Structure and Relationships	 & 9/10 & 1/10 & 0/10\\ \hline
9&	Structure and Relationships		 & 13/20 & 6/20 & 1/20\\ \hline
\rowcolor{green!30} 10&	Patterns	 &8/10 & 2/10& 0/10 \\ \hline
\rowcolor{green!30} 11&	 Code Examples    	 & 9/10 & 0/10& 1/10 \\ \hline
\rowcolor{green!30} 12&	 Control-Flow 	& 8/10 & 2/10&0/10  \\ \hline
\rowcolor{green!30} 13&	 Concepts	 & 8/10 & 1/10 & 1/10 \\ \hline
\rowcolor{green!30} 14&	Patterns	& 8/10 & 2/10 & 0/10 \\ \hline
\rowcolor{green!30} 15&	Purpose and Rationale 	 & 8/10 & 2/10 & 0/10\\ \hline
\rowcolor{green!30} 16&	Qual. Attributes, Intern. Aspects	& 7/10 & 2/10 & 1/10 \\ \hline
\rowcolor{green!30} 17&	Concepts	 & 6/10 & 2/10  &2/10 \\ \hline
 \end{tabular}
 \caption{Abschätzung der besseren Typen bei Konfusionen}
 \label{tabelle:Abschaetzung_Konfusion}
\end{figure}
Insgesamt können so 12 von 17 häufigen Konfusionen aufgelöst werden. Vier Konfusionen haben ein uneindeutiges Ergebnis. In einem der 17 Fälle entspricht dem Ergebnis nicht der Erwartungen und sollte daher separat diskutiert werden. 

Sobald eine der obigen Konfusionen auftritt und ein besserer Typ indentifiziert wurde (grüne Zeilen), wird dieser dann als richtige Typisierung gewertet.
% so lassen? 
\subsubsection{Diskussion: Konfusion Nr. 7}


\subsubsection{Hilfsmittel}
Für diese Stichprobenziehung wurde eine Django-Funktion geschrieben, welche die betroffenen Benutzer  und die ID der zehn Dokumentationseinheiten unter Angabe eines Konfusionspaares ausgibt. In dem noch zusätzlich die Option "`--count"' übergeben wird, wird die Häufigkeit des angegebenen Konfusionspaares ausgegeben und keine Stichprobenziehung durchgeführt.
Aufruf und (mögliches) Ergebnis dieser Funktion sehen beispielhaft für Nummer 1 (Wissenstypen 1 und 7) aus wie in Abbildung \ref{fig:Funktion-Konfusion} gezeigt.. \\
Die zuletzt ausgebene Zahl gibt zum Zweck der Überprüfung die Anzahl der ausgebenen Zeilen an. Solange mehr als 10 Konfusionspaare der abgefragten Kombination vorhanden sind, wird eine 10 ausgeben, andernfalls die Anzahl der verfügbaren Konfusionen. Beispielsweise erhält man bei der Eingabe 
\begin{lstlisting} 
python manage.py get_sample_of_confusion 4 11
\end{lstlisting} 
die Augabe
\begin{lstlisting} 
lennart | jakob | 4318 | 
lennart | sven_extra_28 | 4377 | 
josephine | leon | 7830 | 
returned 3 lines
\end{lstlisting} 

\begin{figure}[H] 
\centering
\includegraphics[width=1.0\textwidth]{pictures/terminal-confusion-sample.png}
\caption[Funktion für die Konfusions-Stichprobe]{Funktion für die Konfusions-Stichprobe}
\label{fig:Funktion-Konfusion}
\end{figure}

\subsection{Zusammenführen der Goldstichproben}
Da die Goldstichprobe insgesamt drei mal von verschiedenen Gutachtern typisiert wurde, müssen diese für die weitere Verwendung zusammengeführt werden. Um aus drei Wahrheiten die "`eine"' zu machen, wird wie folgt vorgegangen: \\
Es werden alle möglichen Tupel auf die Gesamtverträglichkeit über alle Zeichen berechnet . Zwei dieser drei Tupel besitzen somit automatisch den selben Gutachter, so dass diese damit die höchste Gesamtverträglichkeit für diese Einheit besitzt. Die Markierungen dieses Gutachtern werden dann einem "`Dummy-Benutzer"' kopiert. \\
Anschließend werden die Markierungen der Gutachter mit dem des Dummys manuell verglichen und wo nötig noch kleinere Korrekturen vorgenommen. 
Diese sind vor allem folgender Natur:
\begin{itemize}
\item Auf einzelne Markierung war anderes Tupel besser (AUSFORMULIEREN!!)
\item Strucutre and Relationship
\item External References
\end{itemize}
Somit erhält man ein endgültiges, ideales Ergebnis der Goldstichprobe. 

% Es wurden nicht die Markierungen direkt überprüft und übernommen, da ansonsten mehr Markierungen als üblich übernommen worden wären !?!? 


\subsection{Auswertung der Typisierungen}

\subsubsection{Übereinstimmung nach Gutachtern}
Die Übereinstimmung der Wissenstypen nach Gutachtern wurde in der vorangegangen Studie wie folgt gemessen \cite{MaalejRobillard}:
\begin{shaded}
"`We calculated the agreement score for $C_{i} $by dividing the number of ratings which agree with the second coder by the total number of units coded by $C_{i}$. For example, if $C_{i}$coded 500 units and 400 of their Functionality ratings were the same as the ratings of the co-coder, $C_{i} $s agreement score for Functionality would be $400/500 = 0.80$. We calculated the overall agreement by summing all agreements over all variables and dividing by the number of units times 12 (the number of variables)."' 
\end{shaded}
Diese Auswertung habe ich analog auf diese Arbeit übertragen und mittels eines Django-Kommandos umgesetzt. 
Ein Wissenstyp in einer Einheit ist vorhanden, sobald mindestens eine Markierung mit diesem in dieser Einheit gefunden wurde. 
Die Konfusionen habe ich dabei nicht aufgelöst, um die Vergleichbarkeit mit der Originalstudie zu erhalten. 
Abbildung \ref{fig:Uebereinstimmung_Gutachtern} zeigt die Übereinstimmung nach Gutachtern. Die ersten drei Spalten geben den kleinsten, den durchschnittlichen und den größten Wert aller Gutachter für einen Wissenstypen an. Die letzten beiden Spalten identifizieren die Gutachter mit der besten und der schlechtesten Übereinstimmung. Der durschnittliche Wert ist dabei über alle Wissenstypen hinweg größer als 0,75 und insgesamt größer als 0,87. 

\begin{figure}[H]
\begin{tabular}{c c c c c c} \hline
\textbf{Wissenstyp} & \textbf{Min} & \textbf{Durschn.} & \textbf{Max.} & \textbf{Bester} & \textbf{Schlechtester}  \\ \hline
Functionality & 0,730 & 0,786 & 0,926 & C9 & C6 \\
\rowcolor{gray!20 }Concepts& 0,792 &0,855 & 0,963 & C9 & C5 \\
Directives& 0.803 & 0,876 & 0,929 & C8 & C6 \\
\rowcolor{gray!20 }Purpose& 0,703 & 0,788 & 0,857 & C8 & C6 \\
Quality&0,820 & 0,863 & 0,910 & C1 & C4 \\
\rowcolor{gray!20 }Control-Flow&0,893 & 0,943 & 0,964 & C6 & C8 \\
Structure&0,633 & 0,751 & 0,817 & C5 & C4 \\
\rowcolor{gray!20 }Patterns&0,873 & 0,903 & 0,964 & C8 & C5 \\
Code-Examples&0,963 & 0,984 & 1,0 & C8 & C9 \\
\rowcolor{gray!20 }Environment&0,890 & 0,950 & 1,0 & C8, C9 & C6 \\
References&0,951 & 0,969 & 0,977 & C4 & C2 \\
\rowcolor{gray!20 }Non-Info&0,765&0,857 & 1,0 & C8 & C4 \\ \hline
\textbf{Gesamt} & 0,818 & 0,877 & 0,942 & C8 & C6 \\ \hline
\end{tabular}
\caption{Übereinstimmung nach Gutachtern}
\label{fig:Uebereinstimmung_Gutachtern}
\end{figure}

%\paragraph{Ergebnis}
%\paragraph{Vergleich zum Originalartikel}
%\paragraph{Detailierte Auswertung}

\subsubsection{Übereinstimmung nach Wissenstyp}
Die Übereinstimmung nach Wissenstypen wurde in der Studie von Maalej und Robillard wie folgt berechnet \cite{MaalejRobillard}:
\begin{shaded}
"`We measure agreement for a variable by dividing the number of units for which the two coders agreed (i.e., both rated True or both rated False) over the total number of units. This measure of raw agreement is one among many alternatives for measuring agreement by variable [25]. The advantage of the raw agreement measure is that it is simple to interpret. The disadvantage is that it does not take into account that coders might agree by chance."'
\end{shaded}
Auf Grund der veränderten Typisierungweise in dieser Arbeit ist eine Übereinstimmung durch Zufall sehr viel unwahrscheinlicher, weshalb diese Auswertung für diese Arbeit eher uninteressant ist und somit nicht durchgeführt wird.  
% ganz weglassen? 

\subsubsection{Übereinstimmung nach Einheit}
Zusätzlich kann die Übereinstimmung nach Einheiten berechnet werden. 
Für jede Einheit wird für jeden Wissenstyp geprüft, ob die Gutachter mindstens eine Markierung dieser Art getätigt haben. 
Eine Übereinstimmung liegt dann vor, wenn bei beide Gutachter sich einig sind, ob dieser Wissenstyp (mindestens einmal) vorkommt oder nicht. Da es insgesamt 12 Wissenstypen gibt, entspricht jede Übereinstimmung in einem Wissenstyp $\frac{1}{12} = 8,33\%$ . Für jeden Gutachter wird so die Übereinstimmung über alle Einheiten berechnet und der Durchschnittswert in Abbildung \ref{fig:Uebereinstimmung_Einheit} ausgegeben. Der Zeile für des besten Gutachtern ist grün, die des schlechtesten ist rot markiert. Analog wird der Durchschnittswert für die utnerschiedlichen Kategorien in Abbildung \ref{fig:Uebereinstimmung_Einheit_Kategorie} angezeigt. 

\begin{figure}[H]
\centering
\begin{tabular}{|c|c|} 
Gutachter & Übereinstimmung \\ \hline
\rowcolor{gray!20}C1 & 0,873 \\
C2 & 0,882\\
\rowcolor{gray!20 }C3 & 0,855\\
C4 & 0,848\\
\rowcolor{gray!20 }C5 & 0,870\\
\rowcolor{red!20 }C6 & 0,845\\
\rowcolor{gray!20 }C7 & 0,882\\
C8 & 0,898\\
\rowcolor{green!20 }C9 & 0,907\\ \hline
\textbf{Durchsch.} & 0.866 \\ 
\end{tabular}
\caption{Übereinstimmung nach Einheit je Gutachter}
\label{fig:Uebereinstimmung_Einheit}
\end{figure}

\begin{figure}[H]
\centering
\begin{tabular}{|c|c|}
Kategorie & Übereinstimmung \\ \hline
Methoden & 999 \\
\end{tabular}
\caption{Übereinstimmung nach Einheit je Kategorie}
\label{fig:Uebereinstimmung_Einheit_Kategorie}
\end{figure}
\paragraph{Rechenbeispiel} $\; $ \\
Eine Einheit wird von beiden Gutachtern mit genau einem Wissenstypen markiert. Gutachter A vergibt den Wissenstyp 1 und Gutachter B vergibt den Wissenstyp 2. Somit sind sich Gutachter A und B darüber einig, dass die anderen zehn Wissenstypen (drei bis zwölf) nicht vorhanden sind. Dies ergibt eine Übereinstimmung in dieser Einheit von $\frac{10}{12} = 83,33 \% $.

\subsubsection{Verträglichkeit von Einheiten}
Weiterhin wird die Verträglichkeit der Einheiten betrachtet und ausgewertet. Genau genommen bezieht sich die Verträglichkeit auf die einzelnen Markierungen. \\
\textbf{Definition:} Eine Markierung ist verträglich, wenn es eine andere Markierung gibt, die  
\begin{itemize}
\item diese umschließt (größer oder gleich groß ist)
\item ein Teil dieser Markierung (kleiner ist)
\end{itemize}
\textbf{Nochmal genau in den Quellcode gucken: wie war das!?}
Dabei werden die Konfusionen beachtet (und einmal vielleicht nicht?)